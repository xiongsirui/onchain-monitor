# 快速上手指南 - 5 分钟开始监控

## 🎯 最简单的启动方式（推荐）

### 3 步启动 BSC 监听器（无需配置 API Key）

```bash
# 步骤 1: 安装依赖
pip install -r requirements.txt

# 步骤 2: 验证安装
python3 verify_installation.py

# 步骤 3: 启动 BSC 监听器
python3 run_bsc.py
```

**就这么简单！** BSC 使用币安官方免费 RPC，无需任何配置。

---

## 📋 详细步骤

### 步骤 1: 安装依赖（1 分钟）

```bash
cd /home/ray/code/onchain-monitor
pip install -r requirements.txt
```

**如果遇到权限问题**:
```bash
pip install --user -r requirements.txt
```

**如果安装很慢**（国内用户）:
```bash
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
```

---

### 步骤 2: 验证安装（30 秒）

```bash
python3 verify_installation.py
```

**预期输出**:
```
✅ Python 版本: 3.x.x
✅ web3: x.x.x
✅ requests: x.x.x
⚠️  solana: 未安装 (可选)
🎉 恭喜！所有检查都通过了！
```

**如果有问题**: 根据错误提示修复后重新验证

---

### 步骤 3: 启动监听器（30 秒）

#### 方式 A: BSC 快速启动（推荐）⚡

```bash
python3 run_bsc.py
```

**提示**:
```
是否需要使用代理？(y/n, 默认 n):
```
- 网络正常: 输入 `n` 回车
- 需要代理: 输入 `y` → 输入代理地址（如 `127.0.0.1:7897`）

**启动成功**:
```
🚀 BSC 监听器已启动！
🔍 [BSC] 检查区块 xxxxx - xxxxx
```

#### 方式 B: ETH 单链启动（需要 API Key）

```bash
# 1. 访问 https://www.alchemy.com/ 注册并获取 API Key
# 2. 编辑 run.py 第 19-20 行
# 3. 运行
python3 run.py
```

#### 方式 C: 多链启动

```bash
python3 example_multichain.py
# 选择示例 2 或 6
```

---

## ✅ 运行效果

```
⏳ 正在初始化监听器...
   - HTTP RPC: https://eth-mainnet.g.alchemy.com/v2/...
   - WebSocket: wss://eth-mainnet.g.alchemy.com/v2/...
   - 币安过滤器: 启用
   - 持久化文件: listener_state.pkl

⏳ 正在更新币安代币列表...（首次运行需30-60秒）
   • Binance API: ✅ 628 个代币
   • CoinGecko 映射: ✅ ETH: 245 个, BSC: 198 个
   • 总计: 628 个代币已缓存

✅ 初始化完成！

功能说明:
  - 实时监听 Binance 钱包地址
  - 自动过滤已上架代币（600+ 代币）
  - 女巫攻击检测
  - 多维度置信度评分
  - 智能分级告警 (HIGH/MEDIUM)
  - 自动数据持久化

================================================================================
🚀 开始监听... (按 Ctrl+C 停止并查看统计报告)
================================================================================
```

---

## 看到告警时的输出

```
════════════════════════════════════════════════════════════
🚨🚨🚨 HIGH 级别告警! 🚨🚨🚨
════════════════════════════════════════════════════════════

代币: NEWCOIN (New Coin)
合约: 0x1234567890abcdef1234567890abcdef12345678
转账数: 5 笔
发送者: 3 个
置信度: 85%

🟢 强烈建议: 高置信度信号，建议重点关注

立即行动建议: 深入调查此代币！
════════════════════════════════════════════════════════════
```

---

## 停止程序时的输出

按 `Ctrl+C` 后：

```
================================================================================
⏹️  监听已停止
================================================================================
════════════════════════════════════════════════════════════
📊 监听统计报告
════════════════════════════════════════════════════════════

总转账数: 127 笔
已过滤（已上架）: 98 个代币
新检测（未上架）: 12 个代币
发送告警: 3 次

────────────────────────────────────────────────────────────
🚨 未上架新代币详细分析 - 3 个
────────────────────────────────────────────────────────────

🪙 NEWCOIN (New Coin)
   合约: 0x1234...
   转账数: 5
   发送者: 3 个
   置信度: ████████▓▓ 85.00%
   风险等级: LOW
   💎 强烈推荐 - 信号质量高

════════════════════════════════════════════════════════════

✅ 程序已安全退出
```

---

## 常见问题

### Q: 没有看到任何输出？
A: 这很正常！程序在持续监听，只有当检测到新代币时才会输出。你可以：
- 耐心等待（平均每天1-5个新币信号）
- 查看日志确认程序正在运行
- 禁用过滤器查看所有转账（编辑 run.py 设置 ENABLE_FILTER = False）

### Q: 卡在"正在初始化"？
A: 检查：
1. 网络连接是否正常
2. API Key 是否正确
3. 防火墙是否拦截 WebSocket 连接

### Q: 报错 "连接失败"？
A: 确保：
1. API Key 已正确配置
2. 使用的是 Alchemy 的完整 URL（包括 /v2/YOUR_KEY）
3. 网络可以访问 Alchemy 服务

---

## 下一步

1. ✅ 让程序运行一段时间，观察检测效果
2. ✅ 查看 README.md 了解完整功能
3. ✅ 查看 CLAUDE.md 了解技术细节
4. ✅ 根据需要自定义告警阈值

**祝你好运！🚀**
